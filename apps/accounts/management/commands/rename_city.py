import logging

from django.core.management import BaseCommand

from apps.accounts.models import EducationalInstitute, User

cities = {
    '102': "آبادان",
    '129': "آباده",
    '296': "آبدانان",
    '65': "آذرشهر",
    '332': "آرادان",
    '226': "آران وبیدگل",
    '400': "آزادشهر",
    '13': "آستارا",
    '14': "آستانه اشرفیه",
    '2': "آشتیان",
    '398': "آق قلا",
    '29': "آمل",
    '341': "ابرکوه",
    '319': "ابهر",
    '345': "ابوموسی",
    '1': "اراک",
    '374': "اردبیل",
    '209': "اردستان",
    '335': "اردکان",
    '275': "اردل",
    '145': "ارسنجان",
    '71': "ارومیه",
    '286': "ازنا",
    '130': "استهبان",
    '267': "اسدآباد",
    '405': "اسفراین",
    '88': "اسلام آبادغرب",
    '364': "اسلامشهر",
    '66': "اسکو",
    '83': "اشنویه",
    '210': "اصفهان",
    '131': "اقلید",
    '389': "البرز",
    '280': "الیگودرز",
    '25': "املش",
    '177': "انار",
    '103': "اندیمشک",
    '51': "اهر",
    '104': "اهواز",
    '322': "ایجرود",
    '105': "ایذه",
    '233': "ایرانشهر",
    '291': "ایلام",
    '297': "ایوان",
    '30': "بابل",
    '39': "بابلسر",
    '307': "باشت",
    '116': "باغ ملک",
    '158': "بافت",
    '336': "بافق",
    '252': "بانه",
    '125': "باوی",
    '200': "بجستان",
    '406': "بجنورد",
    '230': "برخوار",
    '195': "بردسکن",
    '167': "بردسیر",
    '281': "بروجرد",
    '271': "بروجن",
    '59': "بستان آباد",
    '353': "بستک",
    '159': "بم",
    '58': "بناب",
    '15': "بندرانزلی",
    '346': "بندرعباس",
    '347': "بندرلنگه",
    '106': "بندرماهشهر",
    '391': "بندرگز",
    '344': "بهاباد",
    '268': "بهار",
    '371': "بهارستان",
    '107': "بهبهان",
    '31': "بهشهر",
    '305': "بهمیی",
    '385': "بویین زهرا",
    '144': "بوانات",
    '309': "بوشهر",
    '80': "بوکان",
    '301': "بویراحمد",
    '253': "بیجار",
    '413': "بیرجند",
    '375': "بیله سوار",
    '386': "تاکستان",
    '181': "تایباد",
    '52': "تبریز",
    '183': "تربت جام",
    '182': "تربت حیدریه",
    '337': "تفت",
    '3': "تفرش",
    '82': "تکاب",
    '32': "تنکابن",
    '310': "تنگستان",
    '358': "تهران",
    '262': "تویسرکان",
    '227': "تیران وکرون",
    '99': "ثلاث باباجانی",
    '407': "جاجرم",
    '350': "جاسک",
    '203': "جغتای",
    '63': "جلفا",
    '317': "جم",
    '132': "جهرم",
    '96': "جوانرود",
    '43': "جویبار",
    '205': "جوین",
    '160': "جیرفت",
    '352': "حاجی اباد",
    '343': "خاتم",
    '235': "خاش",
    '320': "خدابنده",
    '282': "خرم آباد",
    '146': "خرم بید",
    '323': "خرمدره",
    '108': "خرمشهر",
    '376': "خلخال",
    '198': "خلیل آباد",
    '354': "خمیر",
    '4': "خمین",
    '211': "خمینی شهر",
    '152': "خنج",
    '11': "خنداب",
    '192': "خواف",
    '212': "خوانسار",
    '422': "خوسف",
    '133': "داراب",
    '100': "دالاهو",
    '327': "دامغان",
    '208': "داورزن",
    '414': "درمیان",
    '292': "دره شهر",
    '184': "درگز",
    '109': "دزفول",
    '110': "دشت آزادگان",
    '311': "دشتستان",
    '312': "دشتی",
    '283': "دلفان",
    '5': "دلیجان",
    '244': "دلگان",
    '359': "دماوند",
    '304': "دنا",
    '229': "دهاقان",
    '293': "دهلران",
    '261': "دهگلان",
    '289': "دوره",
    '284': "دورود",
    '316': "دیلم",
    '258': "دیواندره",
    '175': "رابر",
    '33': "رامسر",
    '120': "رامشیر",
    '111': "رامهرمز",
    '401': "رامیان",
    '168': "راور",
    '365': "رباطکریم",
    '269': "رزن",
    '154': "رستم",
    '17': "رشت",
    '196': "رشتخوار",
    '26': "رضوانشهر",
    '161': "رفسنجان",
    '101': "روانسر",
    '18': "رودبار",
    '172': "رودبارجنوب",
    '19': "رودسر",
    '290': "رومشکان",
    '174': "ریگان",
    '236': "زابل",
    '237': "زاهدان",
    '204': "زاوه",
    '162': "زرند",
    '9': "زرندیه",
    '147': "زرین دشت",
    '321': "زنجان",
    '421': "زیرکوه",
    '34': "ساری",
    '278': "سامان",
    '425': "ساوجبلاغ",
    '6': "ساوه",
    '185': "سبزوار",
    '53': "سراب",
    '238': "سراوان",
    '418': "سرایان",
    '240': "سرباز",
    '415': "سربیشه",
    '193': "سرخس",
    '334': "سرخه",
    '74': "سردشت",
    '260': "سروآباد",
    '153': "سروستان",
    '91': "سرپل ذهاب",
    '254': "سقز",
    '288': "سلسله",
    '75': "سلماس",
    '328': "سمنان",
    '213': "سمیرم",
    '92': "سنقر",
    '255': "سنندج",
    '35': "سوادکوه",
    '163': "سیرجان",
    '299': "سیروان",
    '134': "سپیدان",
    '112': "شادگان",
    '7': "شازند",
    '329': "شاهرود",
    '81': "شاهین دژ",
    '224': "شاهین شهرومیمه",
    '60': "شبستر",
    '24': "شفت",
    '361': "شمیرانات",
    '164': "شهربابک",
    '217': "شهرضا",
    '272': "شهرکرد",
    '363': "شهریار",
    '115': "شوش",
    '113': "شوشتر",
    '87': "شوط",
    '135': "شیراز",
    '408': "شیروان",
    '97': "صحنه",
    '20': "صومعه سرا",
    '324': "طارم",
    '427': "طالقان",
    '423': "طبس",
    '16': "طوالش",
    '46': "عباس آباد",
    '69': "عجب شیر",
    '393': "علی آباد",
    '169': "عنبرآباد",
    '273': "فارسان",
    '409': "فاروج",
    '150': "فراشبند",
    '12': "فراهان",
    '419': "فردوس",
    '429': "فردیس",
    '214': "فریدن",
    '215': "فریدونشهر",
    '45': "فریدونکنار",
    '194': "فریمان",
    '136': "فسا",
    '216': "فلاورجان",
    '251': "فنوج",
    '21': "فومن",
    '137': "فیروزآباد",
    '367': "فیروزکوه",
    '36': "قایم شهر",
    '416': "قاینات",
    '256': "قروه",
    '387': "قزوین",
    '348': "قشم",
    '93': "قصرشیرین",
    '173': "قلعه گنج",
    '384': "قم",
    '186': "قوچان",
    '148': "قیروکارزین",
    '187': "کاشمر",
    '259': "کامیاران",
    '266': "کبودرآهنگ",
    '165': "کرمان",
    '197': "کلات",
    '399': "کلاله",
    '314': "کنگان",
    '166': "کهنوج",
    '380': "کوثر",
    '171': "کوهبنان",
    '276': "کوهرنگ",
    '139': "لارستان",
    '118': "لالی",
    '143': "لامرد",
    '23': "لاهیجان",
    '274': "لردگان",
    '220': "لنجان",
    '308': "لنده",
    '22': "لنگرود",
    '28': "ماسال",
    '76': "ماکو",
    '410': "مانه وسملقان",
    '325': "ماهنشان",
    '225': "مبارکه",
    '8': "محلات",
    '40': "محمودآباد",
    '54': "مراغه",
    '55': "مرند",
    '140': "مرودشت",
    '257': "مریوان",
    '114': "مسجدسلیمان",
    '189': "مشهد",
    '377': "مشگین شهر",
    '369': "ملارد",
    '263': "ملایر",
    '64': "ملکان",
    '141': "ممسنی",
    '170': "منوجان",
    '199': "مه ولات",
    '77': "مهاباد",
    '331': "مهدی شهر",
    '149': "مهر",
    '295': "مهران",
    '245': "مهرستان",
    '338': "مهریز",
    '78': "میاندوآب",
    '56': "میانه",
    '340': "میبد",
    '349': "میناب",
    '397': "مینودشت",
    '222': "نجف آباد",
    '178': "نرماشیر",
    '223': "نطنز",
    '426': "نظرآباد",
    '79': "نقده",
    '381': "نمین",
    '264': "نهاوند",
    '417': "نهبندان",
    '37': "نور",
    '38': "نوشهر",
    '382': "نیر",
    '190': "نیشابور",
    '239': "نیک شهر",
    '98': "هرسین",
    '62': "هریس",
    '57': "هشترود",
    '265': "همدان",
    '119': "هندیجان",
    '362': "ورامین",
    '68': "ورزقان",
    '379': "پارس آباد",
    '355': "پارسیان",
    '151': "پاسارگاد",
    '366': "پاکدشت",
    '90': "پاوه",
    '372': "پردیس",
    '287': "پلدختر",
    '85': "پلدشت",
    '72': "پیرانشهر",
    '228': "چادگان",
    '67': "چاراویماق",
    '84': "چالدران",
    '42': "چالوس",
    '234': "چابهار",
    '191': "چناران",
    '128': "کارون",
    '138': "کازرون",
    '218': "کاشان",
    '424': "کرج",
    '89': "کرمانشاه",
    '50': "کلاردشت",
    '61': "کلیبر",
    '10': "کمیجان",
    '94': "کنگاور",
    '156': "کوار",
    '285': "کوهدشت",
    '121': "گتوند",
    '330': "گرمسار",
    '411': "گرمه",
    '378': "گرمی",
    '395': "گرگان",
    '44': "گلوگاه",
    '219': "گلپایگان",
    '188': "گناباد",
    '315': "گناوه",
    '396': "گنبدکاووس",
    '95': "گیلانغرب",
    '303': "گچساران",
    '430': "یزد"
}
provinces = {'4': "آذربایجان شرقی",
             '5': "آذربایجان غربی",
             '25': "اردبیل",
             '11': "اصفهان",
             '31': "البرز",
             '17': "ایلام",
             '19': "بوشهر",
             '24': "تهران",
             '30': "خراسان جنوبی",
             '10': "خراسان رضوی",
             '29': "خراسان شمالی",
             '7': "خوزستان",
             '20': "زنجان",
             '21': "سمنان",
             '12': "سیستان وبلوچستان",
             '8': "فارس",
             '27': "قزوین",
             '26': "قم",
             '13': "کردستان",
             '9': "کرمان",
             '6': "کرمانشاه",
             '18': "کهگیلویه و بویراحمد",
             '28': "گلستان",
             '2': "گیلان",
             '16': "لرستان",
             '3': "مازندران",
             '1': "مرکزی",
             '23': "هرمزگان",
             '14': "همدان",
             '15': "چهارمحال و بختیاری",
             '22': "یزد"}

logger = logging.getLogger(__file__)


class Command(BaseCommand):
    help = 'renames cities'

    def handle(self, *args, **options):
        for inst in EducationalInstitute.objects.all():
            if inst.city and cities.get(inst.city):
                inst.city = cities.get(inst.city)
            if inst.province and provinces.get(inst.province):
                inst.province = provinces.get(inst.province)
            inst.save()
        for user in User.objects.all():
            if user.city and cities.get(user.city):
                user.city = cities.get(user.city)
            if user.province and provinces.get(user.province):
                user.province = provinces.get(user.province)
            user.save()
        self.stdout.write(self.style.SUCCESS('Successfully renamed cities'))
